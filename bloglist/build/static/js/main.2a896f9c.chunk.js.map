{"version":3,"sources":["services/blogs.js","components/Blog.js","services/login.js","components/LoginForm.js","components/BlogForm.js","components/Error.js","components/Sucess.js","components/Toggable.js","App.js","index.js"],"names":["baseUrl","token","getAll","config","headers","Authorization","axios","get","then","result","data","setToken","tok","create","obj","a","post","update","id","url","put","remove","delete","Blog","blog","stateSetter","blogState","currentUser","useState","visible","setVisible","handleLikes","title","author","user","likes","blogService","console","log","updatedBlog","map","removeBlog","window","confirm","blogAfterDelete","filter","hideWhenVisible","display","buttonLabel","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","borderRadius","onClick","username","login","LoginForm","password","onSubmit","usernameSetter","passwordSetter","value","name","onChange","event","target","type","BlogForm","createBlog","setTitle","setAuthor","setUrl","preventDefault","ErrorNotification","msg","className","SucessNotification","Toggable","props","visibility","setVisibility","toggleVisbibilty","showWhenVisible","buttonName","children","App","blogs","setBlogs","setUser","setPasword","setUsername","errorMsg","setErrorMsg","sucessMsg","setSucessMsg","useEffect","userJson","localStorage","getItem","JSON","parse","response","handleLogin","loginService","setItem","stringify","currentblog","setTimeout","handleBlogForm","concat","sortedBlog","sort","b","Error","Sucess","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2a896f9c.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/blog'\n\nlet token = null\n\nconst setToken=(tok) => {\n  token =`bearer ${tok}`\n}\nconst getAll = () => {\n  // uses then based promises since it is called in useEffect hooks\n  // async and await callis in useeffect hooks can lead to race condition and weird behaviors.\n  const config = {\n    headers:{\n      Authorization:token\n    }\n  }\n  const request = axios.get(baseUrl,config)\n  return request.then(result => result.data)\n}\n\nconst create = async (obj) => {\n  const config = {\n    headers:{\n      Authorization:token\n    }\n  }\n  const result = await axios.post(baseUrl,obj,config)\n  return result.data\n}\n\nconst update = async (obj,id) => {\n  const config = {\n    headers:{\n      Authorization:token\n    }\n  }\n  const url = `${baseUrl}/${id}`\n  const result = await axios.put(url,obj,config)\n  return result.data\n}\n\nconst remove = async (id) => {\n  const config = {\n    headers:{\n      Authorization:token\n    }\n  }\n  const  url = `${baseUrl}/${id}`\n  const result = await axios.delete(url,config)\n  return result.data\n}\n\n\nexport default { getAll,setToken,create,update,remove }","import React,{ useState } from 'react'\nimport blogService from '../services/blogs'\n\nconst Blog = ({ blog,stateSetter,blogState,currentUser }) => {\n\n  const [visible,setVisible]=useState(false)\n  const changeVisible=() => {\n    setVisible(!visible)\n  }\n\n  const handleLikes=async (blog) => {\n    const obj ={\n      title:blog.title,\n      url:blog.url,\n      author:blog.author,\n      user:blog.user.id,\n      likes:blog.likes+1\n    }\n\n    const result = await blogService.update(obj,blog.id)\n    console.log(blogState)\n    let updatedBlog = blogState.map(blog => blog.id !==result.id?blog:result)\n    stateSetter(updatedBlog)\n\n\n  }\n  const removeBlog=async (blog) => {\n    if(window.confirm('do you want to delete this blog ')){\n      const result = await blogService.remove(blog.id)\n      const blogAfterDelete = blogState.filter(obj => obj.id !== result.id)\n      stateSetter(blogAfterDelete)\n    }\n\n\n\n  }\n  const hideWhenVisible ={ display:visible?'':'none' }\n  const buttonLabel = visible?'hide':'view'\n\n  const blogStyle = {\n    paddingTop: 10,\n    paddingLeft: 2,\n    border: 'solid',\n    borderWidth: 1,\n    marginBottom: 5,\n    borderRadius: 5,\n  }\n\n  return (\n    <div style={blogStyle}>\n      <button onClick={changeVisible}>{buttonLabel}</button>\n      <div>\n\n        <h5>{blog.title}</h5>\n      </div>\n      <div style={hideWhenVisible}>\n        <p>{blog.url}</p>\n        <p>{blog.author}</p>\n        <span>Likes: </span>{blog.likes} <button onClick={() => {handleLikes(blog)}}>like</button>\n        {blog.user.username === currentUser.username? <button onClick={() => {removeBlog(blog)}}>remove</button>:null}\n\n      </div>\n\n    </div>\n  )\n}\n\nexport default Blog","import axios from 'axios'\nconst baseUrl = '/api/login'\n\n\nconst login =async (obj) => {\n  const result = await axios.post(baseUrl,obj)\n  return result.data\n}\n\nexport default { login }","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst LoginForm=({ username,password,onSubmit,usernameSetter,passwordSetter }) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n                username: <input value={username} name=\"username\" onChange={(event) => {usernameSetter(event.target.value)}} />\n      </div>\n      <div>\n                passowrd: <input value={password} name=\"password\" onChange={(event) => {passwordSetter(event.target.value)}} />\n      </div>\n\n      <button type=\"submit\">Login</button>\n\n\n    </form>\n  )\n}\nLoginForm.propTypes = {\n  username: PropTypes.string.isRequired,\n  password: PropTypes.string.isRequired,\n  passwordSetter: PropTypes.func.isRequired,\n  usernameSetter: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired\n}\n\nexport default LoginForm","import React ,{ useState } from 'react'\n\nconst BlogForm=({ createBlog }) => {\n  const [title,setTitle]= useState('')\n  const [author,setAuthor] = useState('')\n  const [url,setUrl] = useState('')\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    let obj = {\n      title:title,\n      author:author,\n      url:url,\n      likes:0\n    }\n    createBlog(obj)\n    setTitle('')\n    setUrl('')\n    setAuthor('')\n  }\n  return(\n    <form onSubmit={handleSubmit}>\n      <div>\n                title: <input name=\"title\" value={title} onChange={(event) => setTitle(event.target.value)}  />\n      </div>\n      <div>\n                author: <input name=\"author\" value={author} onChange={(event) => setAuthor(event.target.value)}/>\n      </div>\n      <div>\n                url: <input name=\"url\" value={url} onChange={(event) => setUrl(event.target.value)} />\n      </div>\n      <button type=\"submit\">create</button>\n    </form>\n  )\n}\n\nexport default BlogForm","import React from 'react'\n\nconst ErrorNotification= ({ msg }) => {\n  return (\n    <p className=\"error\">{msg}</p>\n  )\n}\n\nexport default ErrorNotification","import React from 'react'\n\nconst SucessNotification=({ msg }) => {\n  return (\n    <p className=\"sucess\">{msg}</p>\n  )\n}\n\nexport default SucessNotification","import React, { useState } from 'react'\n\nconst Toggable=(props) => {\n  const [visibility,setVisibility] =useState(false)\n\n  const toggleVisbibilty=() => {\n    setVisibility(!visibility)\n  }\n\n  const hideWhenVisible ={ display:visibility? 'none':'' }\n  const showWhenVisible ={ display:visibility? '':'none' }\n\n  return(\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisbibilty}>{props.buttonName}</button>\n      </div>\n      <div style={showWhenVisible}>\n        {props.children}\n        <button onClick={toggleVisbibilty}>cancel</button>\n      </div>\n    </div>\n  )\n}\n\nexport default Toggable\n","import React, { useState, useEffect } from 'react'\nimport './App.css'\nimport Blog from './components/Blog'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport LoginForm from './components/LoginForm'\nimport BlogForm from './components/BlogForm'\nimport ErrorNotification from './components/Error'\nimport SucessNotification from './components/Sucess'\nimport Toggable from './components/Toggable'\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [user,setUser] = useState(null)\n  const [password, setPasword] = useState('')\n  const [username,setUsername] = useState('')\n  const [errorMsg, setErrorMsg] = useState(null)\n  const [sucessMsg,setSucessMsg] = useState(null)\n\n  /* useEffect(() => {\n    blogService.getAll().then(response=> setBlogs(response))\n\n  }, [])\n  */\n  //check if user details is in local storage\n  useEffect(() => {\n    let userJson = window.localStorage.getItem('loggedinUser')\n    if(userJson){\n      const user = JSON.parse(userJson)\n      setUser(user)\n      blogService.setToken(user.token)\n      blogService.getAll().then(response => setBlogs(response))\n    }\n\n\n\n  },[])\n  const handleLogin=async (event) => {\n    event.preventDefault()\n    const obj = {\n      username:username,\n      password:password\n    }\n\n    try {\n\n      const result = await loginService.login(obj)\n\n      window.localStorage.setItem('loggedinUser',JSON.stringify(result))\n\n      blogService.setToken(result.token)\n      setUser(result)\n      const currentblog =await  blogService.getAll()\n      setBlogs(currentblog)\n      setUsername('')\n      setPasword('')\n\n\n    }catch(error){\n      setErrorMsg('Wrong username or password')\n      setTimeout(() => {\n        setErrorMsg(null)\n      }, 5000)\n    }\n\n\n  }\n\n\n\n  const handleLogout=() => {\n    window.localStorage.removeItem('loggedinUser')\n    setUser(null)\n  }\n\n  const handleBlogForm = async (obj) => {\n\n    try{\n\n      const response = await blogService.create(obj)\n      setBlogs(blogs.concat(response))\n\n      setSucessMsg(response.title)\n      setTimeout(() => {\n        setSucessMsg(null)\n      }, 5000)\n    }catch(error){\n      setErrorMsg(error)\n      setTimeout(() => {\n        setErrorMsg(null)\n      }, 5000)\n    }\n  }\n\n  const sortBylikes = () => {\n    const sortedBlog = blogs.sort((a,b) => b.likes-a.likes)\n    return sortedBlog\n\n  }\n  let sortedBlog = sortBylikes()\n\n  if(user===null){\n    return (\n      <>\n        {errorMsg===null?null:<ErrorNotification msg={errorMsg}/>}\n        <LoginForm username={username} password={password} usernameSetter={setUsername} passwordSetter={setPasword} onSubmit={handleLogin} />\n      </>\n    )\n  }\n  return (\n    <div>\n      {sucessMsg===null?null:<SucessNotification msg={sucessMsg}/>}\n      {errorMsg===null?null:<ErrorNotification/>}\n      <button onClick={handleLogout}>logout</button>\n      <h1>logged as {user.username}</h1>\n      <Toggable buttonName=\"create blog\">\n        <BlogForm createBlog={handleBlogForm}/>\n      </Toggable>\n\n      <h2>blogs</h2>\n      {sortedBlog.map(blog =>\n        <Blog key={blog.id} blog={blog} stateSetter={setBlogs} blogState={blogs} currentUser={user}/>\n\n      )}\n    </div>\n  )\n}\n\nexport default App\n\n/*\n{\n    \"title\": \"olamide\",username:\n    \"url\": \"google twitter blog\",\n    \"author\": \"bandba\",\n    \"likes\": 30,\n    \"user\": {\n      \"name\": \"who ami\",\n      \"username\": \"tenimakalaki\",\n      \"blogs\": [\n        \"615e1fc362f8d8725b4818e9\",\n        \"615edcf2ebe50b8877e89f07\",\n        \"615ef43bebe50b8877e89f12\",\n        \"615ef504cfee34014b1dd77b\",\n        \"615f15797ad0c8916b845be4\"\n      ],\n      \"id\": \"615d88320efaf11f811a21ad\"\n    },\n    \"id\": \"615edcf2ebe50b8877e89f07\"\n  },\n*/","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}